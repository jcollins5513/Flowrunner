<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Planet Explorer</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');
body {
font-family: 'Inter', sans-serif;
background-color: #020617; /* Slate 950 */
overflow: hidden;
margin: 0;
color: #e2e8f0;
}
/* Custom Scrollbar for the bottom nav */
.hide-scrollbar::-webkit-scrollbar {
display: none;
}
.hide-scrollbar {
-ms-overflow-style: none;
scrollbar-width: none;
}
.glass-panel {
background: rgba(15, 23, 42, 0.6);
backdrop-filter: blur(12px);
-webkit-backdrop-filter: blur(12px);
border: 1px solid rgba(255, 255, 255, 0.08);
}
.planet-nav-item.active {
background: rgba(255, 255, 255, 0.15);
border-color: rgba(255, 255, 255, 0.3);
}
canvas {
display: block;
outline: none;
}
/* Subtle glowing text */
.glow-text {
text-shadow: 0 0 20px rgba(56, 189, 248, 0.5);
}
</style></head>
<body class="h-screen w-full relative select-none text-slate-200 antialiased">

    <!-- 3D Canvas Container -->
    <div id="canvas-container" class="absolute inset-0 z-0"></div>

    <!-- Top Navigation / HUD -->
    <nav class="absolute top-0 left-0 right-0 z-50 p-6 flex justify-between items-start pointer-events-none">
        
        <!-- Logo Area -->
        <div class="pointer-events-auto flex flex-col gap-1">
            <div class="flex items-center gap-2 text-white">
                <div class="w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center shadow-lg shadow-indigo-500/20">
                    <i data-lucide="rocket" class="w-5 h-5 text-white"></i>
                </div>
                <h1 class="text-lg font-medium tracking-tight leading-none">PLANET EXPLORER</h1>
            </div>
            <span class="text-xs text-slate-400 font-medium tracking-wide ml-10">SOLAR SYSTEM V.1.0</span>
        </div>

        <!-- Gamification / Stats -->
        <div class="pointer-events-auto flex gap-3">
            <div class="glass-panel rounded-full px-4 py-2 flex items-center gap-3">
                <div class="flex items-center gap-1.5">
                    <i data-lucide="trophy" class="w-4 h-4 text-yellow-400"></i>
                    <span class="text-xs font-medium tracking-tight text-slate-200">Level 3 Explorer</span>
                </div>
                <div class="w-px h-4 bg-white/10"></div>
                <div class="flex items-center gap-1.5">
                    <i data-lucide="star" class="w-4 h-4 text-indigo-400"></i>
                    <span class="text-xs font-medium tracking-tight text-slate-200">450 XP</span>
                </div>
            </div>
            
            <button class="glass-panel w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/10 transition-colors">
                <i data-lucide="settings-2" class="w-5 h-5 text-slate-300"></i>
            </button>
        </div>
    </nav>

    <!-- Side Panel (Planet Detail) -->
    <aside id="planet-panel" class="absolute top-24 right-6 z-40 w-80 glass-panel rounded-2xl p-6 translate-x-96 transition-transform duration-500 ease-out opacity-0 pointer-events-auto flex flex-col gap-4">
        <div class="flex justify-between items-start">
            <div>
                <h2 id="panel-title" class="text-3xl font-medium tracking-tight text-white mb-1">Earth</h2>
                <p id="panel-subtitle" class="text-sm text-indigo-400 font-medium tracking-tight">The Blue Marble</p>
            </div>
            <button id="close-panel" class="text-slate-400 hover:text-white transition-colors">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>

        <!-- Stats Grid -->
        <div class="grid grid-cols-2 gap-3 mt-2">
            <div class="bg-slate-900/40 rounded-xl p-3 border border-white/5">
                <div class="flex items-center gap-2 mb-1 text-slate-400">
                    <i data-lucide="thermometer" class="w-3 h-3"></i>
                    <span class="text-xs font-medium uppercase tracking-wider">Temp</span>
                </div>
                <span id="stat-temp" class="text-sm font-medium text-slate-100">15°C</span>
            </div>
            <div class="bg-slate-900/40 rounded-xl p-3 border border-white/5">
                <div class="flex items-center gap-2 mb-1 text-slate-400">
                    <i data-lucide="orbit" class="w-3 h-3"></i>
                    <span class="text-xs font-medium uppercase tracking-wider">Year</span>
                </div>
                <span id="stat-orbit" class="text-sm font-medium text-slate-100">365 Days</span>
            </div>
        </div>

        <div class="space-y-2">
            <h3 class="text-xs font-medium uppercase tracking-wider text-slate-500">Did you know?</h3>
            <p id="panel-fact" class="text-sm text-slate-300 leading-relaxed">Earth is the only planet known to support life and has liquid water on its surface.</p>
        </div>

        <!-- Action Buttons -->
        <div class="grid grid-cols-2 gap-3 mt-2">
            <button class="bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg py-2.5 px-4 text-xs font-medium tracking-tight transition-colors flex items-center justify-center gap-2">
                <i data-lucide="gamepad-2" class="w-4 h-4"></i>
                Play Quiz
            </button>
            <button class="bg-white/10 hover:bg-white/20 text-white rounded-lg py-2.5 px-4 text-xs font-medium tracking-tight transition-colors flex items-center justify-center gap-2 border border-white/10">
                <i data-lucide="glasses" class="w-4 h-4"></i>
                AR Mode
            </button>
        </div>
        
        <!-- Mission Progress -->
         <div class="mt-2 pt-4 border-t border-white/10">
             <div class="flex justify-between items-center mb-2">
                 <span class="text-xs text-slate-400 font-medium">Discovery Progress</span>
                 <span class="text-xs text-indigo-400 font-medium">60%</span>
             </div>
             <div class="w-full bg-slate-800 h-1.5 rounded-full overflow-hidden">
                 <div class="bg-indigo-500 h-full rounded-full" style="width: 60%"></div>
             </div>
         </div>
    </aside>

    <!-- Bottom Controls & Nav -->
    <div class="absolute bottom-8 left-6 right-6 z-50 flex flex-col gap-4 pointer-events-none">
        
        <!-- Simulation Controls -->
        <div class="flex justify-center gap-4 pointer-events-auto">
            <div class="glass-panel rounded-full p-1.5 flex items-center gap-1">
                <button id="speed-down" class="w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center text-slate-300 transition-colors">
                    <i data-lucide="rewind" class="w-4 h-4"></i>
                </button>
                <button id="toggle-pause" class="w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-500/30 hover:scale-105 transition-transform">
                    <i data-lucide="pause" class="w-4 h-4 fill-current"></i>
                </button>
                <button id="speed-up" class="w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center text-slate-300 transition-colors">
                    <i data-lucide="fast-forward" class="w-4 h-4"></i>
                </button>
            </div>
            <div class="glass-panel rounded-full px-4 flex items-center">
                <span class="text-xs font-medium text-slate-400 tracking-tight mr-2">ORBIT SPEED</span>
                <span id="speed-indicator" class="text-xs font-medium text-indigo-400 w-8 text-right">1x</span>
            </div>
        </div>

        <!-- Planet Navigation List -->
        <div class="w-full overflow-x-auto hide-scrollbar pointer-events-auto pb-2">
            <div class="flex justify-center min-w-max px-4 gap-3" id="planet-list">
                <!-- Dynamically populated by JS -->
            </div>
        </div>
    </div>

    <!-- Overlay for loading -->
    <div id="loader" class="absolute inset-0 z-[60] bg-slate-950 flex items-center justify-center flex-col gap-4 transition-opacity duration-1000">
        <div class="w-12 h-12 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin"></div>
        <p class="text-sm font-medium tracking-tight text-slate-400 animate-pulse">Initializing Space Engine...</p>
    </div>

    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        // Data: Solar System
        const planetsData = [
            { name: "Sun", color: 0xFDB813, size: 12, distance: 0, speed: 0, desc: "The star at the center of our Solar System.", temp: "5,500°C", year: "N/A", type: "Star" },
            { name: "Mercury", color: 0xA5A5A5, size: 2, distance: 25, speed: 0.02, desc: "The smallest planet and closest to the Sun.", temp: "167°C", year: "88 Days", type: "Planet" },
            { name: "Venus", color: 0xE3BB76, size: 3.5, distance: 35, speed: 0.015, desc: "Spinning in the opposite direction to most planets.", temp: "464°C", year: "225 Days", type: "Planet" },
            { name: "Earth", color: 0x22A6F3, size: 3.8, distance: 50, speed: 0.01, desc: "Our home. The only place we know of with life.", temp: "15°C", year: "365 Days", type: "Planet" },
            { name: "Mars", color: 0xDD4124, size: 2.5, distance: 65, speed: 0.008, desc: "The Red Planet, home to the largest volcano.", temp: "-65°C", year: "687 Days", type: "Planet" },
            { name: "Jupiter", color: 0xD8CA9D, size: 9, distance: 90, speed: 0.004, desc: "A gas giant and the largest planet in the system.", temp: "-110°C", year: "12 Years", type: "Gas Giant" },
            { name: "Saturn", color: 0xA49B72, size: 7.5, distance: 120, speed: 0.003, desc: "Famous for its beautiful, complex ring system.", temp: "-140°C", year: "29 Years", type: "Gas Giant" },
            { name: "Uranus", color: 0xC6D3E3, size: 6, distance: 150, speed: 0.002, desc: "An ice giant that rotates on its side.", temp: "-195°C", year: "84 Years", type: "Ice Giant" },
            { name: "Neptune", color: 0x3F54BA, size: 5.8, distance: 180, speed: 0.001, desc: "The windiest planet, with supersonic winds.", temp: "-200°C", year: "165 Years", type: "Ice Giant" }
        ];

        // Three.js Setup
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x020617, 0.002); // Deep space fog

        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 60, 120);
        camera.lookAt(0, 0, 0);

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        // Lighting
        const ambientLight = new THREE.AmbientLight(0x404040, 1.5); // Soft white light
        scene.add(ambientLight);

        const pointLight = new THREE.PointLight(0xFFFFFF, 2, 300); // Sun light
        scene.add(pointLight);

        // Starfield
        const starsGeometry = new THREE.BufferGeometry();
        const starsCount = 3000;
        const posArray = new Float32Array(starsCount * 3);
        for(let i = 0; i < starsCount * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 500;
        }
        starsGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const starsMaterial = new THREE.PointsMaterial({ size: 0.7, color: 0xffffff, transparent: true, opacity: 0.8 });
        const starMesh = new THREE.Points(starsGeometry, starsMaterial);
        scene.add(starMesh);

        // Planet Mesh Generation
        const planetMeshes = [];
        const orbitLines = [];

        planetsData.forEach((planet, index) => {
            // Planet Body
            const geometry = new THREE.SphereGeometry(planet.size, 32, 32);
            let material;
            
            if (index === 0) {
                // Sun Material (Emissive)
                material = new THREE.MeshBasicMaterial({ color: planet.color });
                const glowGeo = new THREE.SphereGeometry(planet.size * 1.2, 32, 32);
                const glowMat = new THREE.MeshBasicMaterial({ color: planet.color, transparent: true, opacity: 0.2, side: THREE.BackSide });
                const glowMesh = new THREE.Mesh(glowGeo, glowMat);
                scene.add(glowMesh);
            } else {
                // Standard Planet (Lambert for lighting interaction)
                material = new THREE.MeshLambertMaterial({ color: planet.color });
                
                // Orbit Path
                const orbitGeo = new THREE.RingGeometry(planet.distance - 0.2, planet.distance + 0.2, 128);
                const orbitMat = new THREE.MeshBasicMaterial({ color: 0xffffff, opacity: 0.05, transparent: true, side: THREE.DoubleSide });
                const orbit = new THREE.Mesh(orbitGeo, orbitMat);
                orbit.rotation.x = Math.PI / 2;
                scene.add(orbit);
                orbitLines.push(orbit);
            }

            const mesh = new THREE.Mesh(geometry, material);
            mesh.userData = { ...planet, id: index, angle: Math.random() * Math.PI * 2 };
            
            // Special case for Saturn Ring
            if(planet.name === "Saturn") {
                const ringGeo = new THREE.RingGeometry(planet.size + 2, planet.size + 6, 32);
                const ringMat = new THREE.MeshBasicMaterial({ color: 0x8d8668, side: THREE.DoubleSide, transparent: true, opacity: 0.6 });
                const ring = new THREE.Mesh(ringGeo, ringMat);
                ring.rotation.x = Math.PI / 2;
                mesh.add(ring);
            }

            scene.add(mesh);
            planetMeshes.push(mesh);
        });

        // Animation State
        let isPaused = false;
        let timeSpeed = 1;
        let focusTarget = null;
        
        // Setup UI
        const planetListEl = document.getElementById('planet-list');
        
        planetsData.forEach((planet, index) => {
            const btn = document.createElement('button');
            btn.className = `planet-nav-item glass-panel px-4 py-2 rounded-xl flex items-center gap-3 hover:bg-white/10 transition-all group min-w-[140px] border border-transparent`;
            btn.innerHTML = `
                <div class="w-3 h-3 rounded-full" style="background-color: #${planet.color.toString(16)}"></div>
                <div class="text-left">
                    <div class="text-xs font-medium text-slate-200 group-hover:text-white">${planet.name}</div>
                    <div class="text-[10px] text-slate-400">${planet.type}</div>
                </div>
            `;
            btn.onclick = () => focusOnPlanet(index);
            planetListEl.appendChild(btn);
        });

        // Functions
        function focusOnPlanet(index) {
            focusTarget = index;
            const planet = planetMeshes[index];
            const data = planetsData[index];

            // Update Active State in UI
            document.querySelectorAll('.planet-nav-item').forEach((el, i) => {
                if (i === index) el.classList.add('active', 'border-white/20');
                else el.classList.remove('active', 'border-white/20');
            });

            // Move Camera
            const offset = index === 0 ? 40 : 20; // Distance from planet
            const duration = 1.5;

            // If looking at sun, fixed position, else dynamic calculation in loop
            if (index === 0) {
                gsap.to(camera.position, {
                    x: 0, y: 30, z: 60,
                    duration: duration,
                    onUpdate: () => camera.lookAt(0,0,0)
                });
            }
            
            // Show Info Panel
            const panel = document.getElementById('planet-panel');
            
            // Text Updates
            document.getElementById('panel-title').innerText = data.name;
            document.getElementById('panel-subtitle').innerText = data.type;
            document.getElementById('stat-temp').innerText = data.temp;
            document.getElementById('stat-orbit').innerText = data.year;
            document.getElementById('panel-fact').innerText = data.desc;

            // Animation slide in
            panel.classList.remove('translate-x-96', 'opacity-0');
        }

        document.getElementById('close-panel').onclick = () => {
            focusTarget = null;
            document.getElementById('planet-panel').classList.add('translate-x-96', 'opacity-0');
            
            // Reset View
            gsap.to(camera.position, {
                x: 0, y: 60, z: 120,
                duration: 2,
                onUpdate: () => camera.lookAt(0,0,0)
            });
            
            document.querySelectorAll('.planet-nav-item').forEach(el => el.classList.remove('active', 'border-white/20'));
        };

        // Time Controls
        document.getElementById('toggle-pause').onclick = function() {
            isPaused = !isPaused;
            this.innerHTML = isPaused 
                ? `<i data-lucide="play" class="w-4 h-4 fill-current"></i>` 
                : `<i data-lucide="pause" class="w-4 h-4 fill-current"></i>`;
            lucide.createIcons();
        };

        document.getElementById('speed-up').onclick = () => {
            if(timeSpeed < 5) timeSpeed += 0.5;
            document.getElementById('speed-indicator').innerText = timeSpeed + 'x';
        };

        document.getElementById('speed-down').onclick = () => {
            if(timeSpeed > 0.5) timeSpeed -= 0.5;
            document.getElementById('speed-indicator').innerText = timeSpeed + 'x';
        };

        // Animation Loop
        function animate() {
            requestAnimationFrame(animate);

            // Rotate Planets
            planetMeshes.forEach((mesh, index) => {
                // Self rotation
                mesh.rotation.y += 0.005;

                if (index > 0) {
                    const data = mesh.userData;
                    
                    if(!isPaused) {
                        data.angle += data.speed * timeSpeed;
                    }

                    const x = Math.cos(data.angle) * data.distance;
                    const z = Math.sin(data.angle) * data.distance;
                    mesh.position.set(x, 0, z);
                }
            });

            // Camera Tracking if Locked
            if (focusTarget !== null && focusTarget !== 0) {
                const targetMesh = planetMeshes[focusTarget];
                const targetOffset = 20; // Zoom distance
                
                // Smoothly follow the planet
                const idealX = targetMesh.position.x;
                const idealZ = targetMesh.position.z + targetOffset;
                const idealY = 10;

                // Simple linear interpolation (lerp) for smooth camera follow
                camera.position.x += (idealX - camera.position.x) * 0.05;
                camera.position.z += (idealZ - camera.position.z) * 0.05;
                camera.position.y += (idealY - camera.position.y) * 0.05;
                
                camera.lookAt(targetMesh.position);
            } else if (focusTarget === null) {
                // Idle rotation of entire system slightly
                scene.rotation.y += 0.0005;
            }

            renderer.render(scene, camera);
        }

        // Start
        animate();

        // Loading Screen Removal
        window.onload = () => {
            setTimeout(() => {
                const loader = document.getElementById('loader');
                loader.style.opacity = '0';
                setTimeout(() => loader.remove(), 1000);
            }, 1500);
        };

        // Handle Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>
</body>
</html>